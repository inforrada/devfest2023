<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">

   <script>
let aux = {
  "get": "fixtures",
  "parameters": {
    "season": "2023",
    "next": "3",
    "team": "4907"
  },
  "errors": [],
  "results": 3,
  "paging": {
    "current": 1,
    "total": 1
  },
  "response": [
    {
      "fixture": {
        "id": 1083949,
        "referee": null,
        "timezone": "UTC",
        "date": "2023-12-03T19:00:00+00:00",
        "timestamp": 1701630000,
        "periods": {
          "first": null,
          "second": null
        },
        "venue": {
          "id": 20313,
          "name": "Instalaciones de Zubieta",
          "city": "Donostia-San Sebastián"
        },
        "status": {
          "long": "Not Started",
          "short": "NS",
          "elapsed": null
        }
      },
      "league": {
        "id": 435,
        "name": "Primera División RFEF - Group 1",
        "country": "Spain",
        "logo": "https://media-4.api-sports.io/football/leagues/435.png",
        "flag": "https://media-4.api-sports.io/flags/es.svg",
        "season": 2023,
        "round": "Group 1 - 15"
      },
      "teams": {
        "home": {
          "id": 9585,
          "name": "Real Sociedad II",
          "logo": "https://media-4.api-sports.io/football/teams/9585.png",
          "winner": null
        },
        "away": {
          "id": 4907,
          "name": "Ponferradina",
          "logo": "https://media-4.api-sports.io/football/teams/4907.png",
          "winner": null
        }
      },
      "goals": {
        "home": null,
        "away": null
      },
      "score": {
        "halftime": {
          "home": null,
          "away": null
        },
        "fulltime": {
          "home": null,
          "away": null
        },
        "extratime": {
          "home": null,
          "away": null
        },
        "penalty": {
          "home": null,
          "away": null
        }
      }
    },
    {
      "fixture": {
        "id": 1083956,
        "referee": null,
        "timezone": "UTC",
        "date": "2023-12-10T17:00:00+00:00",
        "timestamp": 1702227600,
        "periods": {
          "first": null,
          "second": null
        },
        "venue": {
          "id": 3708,
          "name": "Estadio El Toralín",
          "city": "Ponferrada"
        },
        "status": {
          "long": "Not Started",
          "short": "NS",
          "elapsed": null
        }
      },
      "league": {
        "id": 435,
        "name": "Primera División RFEF - Group 1",
        "country": "Spain",
        "logo": "https://media-4.api-sports.io/football/leagues/435.png",
        "flag": "https://media-4.api-sports.io/flags/es.svg",
        "season": 2023,
        "round": "Group 1 - 16"
      },
      "teams": {
        "home": {
          "id": 4907,
          "name": "Ponferradina",
          "logo": "https://media-4.api-sports.io/football/teams/4907.png",
          "winner": null
        },
        "away": {
          "id": 5258,
          "name": "Cornellà",
          "logo": "https://media-4.api-sports.io/football/teams/5258.png",
          "winner": null
        }
      },
      "goals": {
        "home": null,
        "away": null
      },
      "score": {
        "halftime": {
          "home": null,
          "away": null
        },
        "fulltime": {
          "home": null,
          "away": null
        },
        "extratime": {
          "home": null,
          "away": null
        },
        "penalty": {
          "home": null,
          "away": null
        }
      }
    },
    {
      "fixture": {
        "id": 1083960,
        "referee": null,
        "timezone": "UTC",
        "date": "2023-12-17T16:00:00+00:00",
        "timestamp": 1702828800,
        "periods": {
          "first": null,
          "second": null
        },
        "venue": {
          "id": 2917,
          "name": "Estadi Johan Cruyff",
          "city": "Sant Joan Despí"
        },
        "status": {
          "long": "Not Started",
          "short": "NS",
          "elapsed": null
        }
      },
      "league": {
        "id": 435,
        "name": "Primera División RFEF - Group 1",
        "country": "Spain",
        "logo": "https://media-4.api-sports.io/football/leagues/435.png",
        "flag": "https://media-4.api-sports.io/flags/es.svg",
        "season": 2023,
        "round": "Group 1 - 17"
      },
      "teams": {
        "home": {
          "id": 712,
          "name": "Barcelona B",
          "logo": "https://media-4.api-sports.io/football/teams/712.png",
          "winner": null
        },
        "away": {
          "id": 4907,
          "name": "Ponferradina",
          "logo": "https://media-4.api-sports.io/football/teams/4907.png",
          "winner": null
        }
      },
      "goals": {
        "home": null,
        "away": null
      },
      "score": {
        "halftime": {
          "home": null,
          "away": null
        },
        "fulltime": {
          "home": null,
          "away": null
        },
        "extratime": {
          "home": null,
          "away": null
        },
        "penalty": {
          "home": null,
          "away": null
        }
      }
    }
  ]
};
const settings = {
	async: true,
	crossDomain: true,
	url: 'https://api-football-v1.p.rapidapi.com/v3/fixtures?season=2023&team=4907&next=3',
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': 'b623da9602mshed8ba93d9fbda04p1ef041jsn0d851f04e40d',
		'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
	}
};

$.ajax(settings).done(function (response) {
	console.log(response);
});


    function obtenerValAPI (response, param) {
        let op = param.split ('.');
        let obj = response;
        for (let i = 0; i < op.length; i++) {
            if (obj.hasOwnProperty (op[i])){
                obj = obj[op[i]];
            }
            else {
                return "No se ha encontrado el nodo " + op[i];
            }
        }

        return obj;
    }
 function procesarTexto (response, texto) {
        const patron = /\[\[(.*?)\]\]/g;
        const retornar = texto.replace (patron, (match, p1) => obtenerValAPI (response, p1));
        return retornar;
 }
 function test () {
     let plantilla = $("#plantilla").val();
     let equipo = $("#equipo").val();
     const settings = {
	async: true,
	crossDomain: true,
	url: 'https://api-football-v1.p.rapidapi.com/v3/fixtures?season=2023&team=' + equipo + '&next=3',
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': 'aqui.tu.api',
		'X-RapidAPI-Host': 'api-football-v1.p.rapidapi.com'
	}
};

$.ajax(settings).done(function (response) {
	
    let texto = procesarTexto (response,  plantilla);


$("#resultado").html(texto);

});





 }
   </script> 
</head>

<body>

    <h1>Dev Fest Santiago de Compostela 2023</h1>
    <h2>Creación de contenidos con inteligencia natural</h2>
    <h3>30 de noviembre de 2023 a las 17:30</h3>
    
    <a href="https://rapidapi.com/api-sports/api/api-football/" target="_blank">https://rapidapi.com/api-sports/api/api-football/</a>
<br>
    
    <input type="text" id="equipo" value="4907"> <br>
    <button onclick="test()">Test</button>
<br>
    <textarea id="plantilla">
        <img src="[[response.0.teams.home.logo]]"> vs <img src="[[response.0.teams.away.logo]]"><br>
El partido será entre [[response.0.teams.home.name]] y [[response.0.teams.away.name]] en el campo [[response.0.fixture.venue.name]]

Y el siguiente prtido será entre [[response.1.teams.home.name]] y [[response.1.teams.away.name]] en el campo [[response.1.fixture.venue.name]]

    </textarea>
<br>
    <div id="resultado" style="border-style:solid; border-color: red"></div>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

</body>

</html>
